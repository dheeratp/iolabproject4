<!DOCTYPE html>
<meta charset="utf-8">
<style>

.chart {
	margin-top: 20px;
}

.popularity {
	font: 16px sans-serif;
	text-anchor: end;
	fill: white;
}

.album-art {
	opacity:0.4;
}

.count {
	font:30px sans-serif;
	font-family: "Helvetica";
}

a:hover {
	fill:white;
}

.track {
	font: 14px sans-serif;
	font-weight: bold;
}

.artist {
	font: 12px sans-serif;
}

</style>

<h2>Top 10 Tracks in XXX</h2>
<svg class="chart"></svg>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

// Data from a metro
var data1 = [{"toptracks":{"track":[{"name":"Reflektor","duration":"455","listeners":"258","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Reflektor","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"1"}},{"name":"Do I Wanna Know?","duration":"358","listeners":"221","mbid":"f1e57531-e0df-4b3e-938f-1ae30c5b1a11","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys\/_\/Do+I+Wanna+Know%3F","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92744747.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92744747.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92744747.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92744747.png","size":"extralarge"}],"@attr":{"rank":"2"}},{"name":"We Exist","duration":"344","listeners":"195","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/We+Exist","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"3"}},{"name":"Royals","duration":"190","listeners":"194","mbid":"88d2f206-8cc3-4c26-9fbc-8534b5df0953","url":"http:\/\/www.last.fm\/music\/Lorde\/_\/Royals","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Lorde","mbid":"8e494408-8620-4c6a-82c2-c2ca4a1e4f12","url":"http:\/\/www.last.fm\/music\/Lorde"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93158109.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93158109.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93158109.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93158109.png","size":"extralarge"}],"@attr":{"rank":"4"}},{"name":"Here Comes the Night Time","duration":"391","listeners":"185","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Here+Comes+the+Night+Time","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"5"}},{"name":"Flashbulb Eyes","duration":"162","listeners":"165","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Flashbulb+Eyes","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"6"}},{"name":"Normal Person","duration":"263","listeners":"163","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Normal+Person","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"7"}},{"name":"Wrecking Ball","duration":"221","listeners":"161","mbid":"6a1f0277-fcd5-4eb2-bfd4-c4a3f6d82945","url":"http:\/\/www.last.fm\/music\/Miley+Cyrus\/_\/Wrecking+Ball","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Miley Cyrus","mbid":"7e9bd05a-117f-4cce-87bc-e011527a8b18","url":"http:\/\/www.last.fm\/music\/Miley+Cyrus"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93648565.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93648565.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93648565.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93648565.png","size":"extralarge"}],"@attr":{"rank":"8"}},{"name":"R U Mine?","duration":"200","listeners":"160","mbid":"c99bc041-5d23-4a8e-a767-7c7847d24896","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys\/_\/R+U+Mine%3F","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92744747.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92744747.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92744747.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92744747.png","size":"extralarge"}],"@attr":{"rank":"9"}},{"name":"Afterlife","duration":"353","listeners":"159","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Afterlife","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"10"}},{"name":"Why'd You Only Call Me When You're High?","duration":"161","listeners":"152","mbid":"","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys\/_\/Why%27d+You+Only+Call+Me+When+You%27re+High%3F","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92743903.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92743903.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92743903.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92743903.png","size":"extralarge"}],"@attr":{"rank":"11"}},{"name":"I Should Live in Salt","duration":"222","listeners":"150","mbid":"11c2f2dc-80f4-4d19-8d19-ab5195bf322f","url":"http:\/\/www.last.fm\/music\/The+National\/_\/I+Should+Live+in+Salt","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"12"}},{"name":"You Already Know","duration":"239","listeners":"146","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/You+Already+Know","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"13"}},{"name":"Sea of Love","duration":"30","listeners":"145","mbid":"a1703857-b739-4bba-9842-5d1390c1cbf3","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Sea+of+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"14"}},{"name":"Joan of Arc","duration":"325","listeners":"145","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Joan+of+Arc","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"15"}},{"name":"Applause","duration":"212","listeners":"144","mbid":"e9acb50e-6807-4e67-aeb7-dd77886b5837","url":"http:\/\/www.last.fm\/music\/Lady+Gaga\/_\/Applause","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Lady Gaga","mbid":"650e7db6-b795-4eb5-a702-5ea2fc46c848","url":"http:\/\/www.last.fm\/music\/Lady+Gaga"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92908287.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92908287.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92908287.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92908287.png","size":"extralarge"}],"@attr":{"rank":"16"}},{"name":"Roar","duration":"223","listeners":"144","mbid":"3cb1a5a0-2a10-4bf5-96fb-7211703936ed","url":"http:\/\/www.last.fm\/music\/Katy+Perry\/_\/Roar","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Katy Perry","mbid":"122d63fc-8671-43e4-9752-34e846d62a9c","url":"http:\/\/www.last.fm\/music\/Katy+Perry"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92299593.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92299593.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92299593.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92299593.png","size":"extralarge"}],"@attr":{"rank":"17"}},{"name":"Locura transitoria","duration":"494","listeners":"144","mbid":"","url":"http:\/\/www.last.fm\/music\/Extremoduro\/_\/Locura+transitoria","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Extremoduro","mbid":"f59163ba-1a7a-4349-b0fd-fb9582ebe333","url":"http:\/\/www.last.fm\/music\/Extremoduro"},"@attr":{"rank":"18"}},{"name":"Demons","duration":"30","listeners":"142","mbid":"46553869-a91a-489f-8694-b3cb8bc1e3c5","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Demons","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"19"}},{"name":"Don't Swallow the Cap","duration":"30","listeners":"142","mbid":"aab3b236-abf6-4f45-b87f-bff4e376727f","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Don%27t+Swallow+the+Cap","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"20"}},{"name":"Radioactive","duration":"190","listeners":"140","mbid":"30b4194d-e9b9-42b1-aee6-80d24dc4c6a7","url":"http:\/\/www.last.fm\/music\/Imagine+Dragons\/_\/Radioactive","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Imagine Dragons","mbid":"012151a8-0f9a-44c9-997f-ebd68b5389f9","url":"http:\/\/www.last.fm\/music\/Imagine+Dragons"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/87897873.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/87897873.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/87897873.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/87897873.png","size":"extralarge"}],"@attr":{"rank":"21"}},{"name":"The Monster","duration":"250","listeners":"139","mbid":"","url":"http:\/\/www.last.fm\/music\/Eminem\/_\/The+Monster","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Eminem","mbid":"b95ce3ff-3d05-4e87-9e01-c97b66af13d4","url":"http:\/\/www.last.fm\/music\/Eminem"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/94977859.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/94977859.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/94977859.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/94977859.png","size":"extralarge"}],"@attr":{"rank":"22"}},{"name":"I Need My Girl","duration":"279","listeners":"137","mbid":"21c30ce3-843d-4837-9fa1-4de95d638e65","url":"http:\/\/www.last.fm\/music\/The+National\/_\/I+Need+My+Girl","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"23"}},{"name":"Counting Stars","duration":"257","listeners":"132","mbid":"b4e8a85a-8eda-47d0-a668-cefe70ad91be","url":"http:\/\/www.last.fm\/music\/OneRepublic\/_\/Counting+Stars","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"OneRepublic","mbid":"8aafd46e-f5d3-4923-8da1-43c0a296947f","url":"http:\/\/www.last.fm\/music\/OneRepublic"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/87338269.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/87338269.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/87338269.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/87338269.png","size":"extralarge"}],"@attr":{"rank":"24"}},{"name":"Here Comes the Night Time II","duration":"172","listeners":"131","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Here+Comes+the+Night+Time+II","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"25"}},{"name":"Entre interiores","duration":"247","listeners":"130","mbid":"","url":"http:\/\/www.last.fm\/music\/Extremoduro\/_\/Entre+interiores","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Extremoduro","mbid":"f59163ba-1a7a-4349-b0fd-fb9582ebe333","url":"http:\/\/www.last.fm\/music\/Extremoduro"},"@attr":{"rank":"26"}},{"name":"Wake Me Up - Radio Edit","duration":"250","listeners":"127","mbid":"","url":"http:\/\/www.last.fm\/music\/Avicii\/_\/Wake+Me+Up+-+Radio+Edit","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Avicii","mbid":"24b930c0-5f27-4723-a5aa-3b8b830fb914","url":"http:\/\/www.last.fm\/music\/Avicii"},"@attr":{"rank":"27"}},{"name":"Graceless","duration":"30","listeners":"125","mbid":"9b97d9ad-ca8c-445d-ab88-fef4c2b27d6d","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Graceless","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"28"}},{"name":"\u00a1Qu\u00e9 borde era mi valle!","duration":"234","listeners":"124","mbid":"","url":"http:\/\/www.last.fm\/music\/Extremoduro\/_\/%C2%A1Qu%C3%A9+borde+era+mi+valle!","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Extremoduro","mbid":"f59163ba-1a7a-4349-b0fd-fb9582ebe333","url":"http:\/\/www.last.fm\/music\/Extremoduro"},"@attr":{"rank":"29"}},{"name":"Safe and Sound","duration":"193","listeners":"121","mbid":"f5d85fce-f147-42b4-8a58-c2c6ed989faa","url":"http:\/\/www.last.fm\/music\/Capital+Cities\/_\/Safe+and+Sound","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Capital Cities","mbid":"119a2c67-e6d6-41cf-a58c-c51b75c80daa","url":"http:\/\/www.last.fm\/music\/Capital+Cities"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/90723081.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/90723081.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/90723081.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/90723081.png","size":"extralarge"}],"@attr":{"rank":"30"}},{"name":"Arabella","duration":"207","listeners":"119","mbid":"36569a1a-55c5-4bc4-ae12-46e49df94921","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys\/_\/Arabella","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92744747.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92744747.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92744747.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92744747.png","size":"extralarge"}],"@attr":{"rank":"31"}},{"name":"Fireproof","duration":"30","listeners":"119","mbid":"0213088d-0d72-4fff-a803-feff7f7faaf7","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Fireproof","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"32"}},{"name":"This Is the Last Time","duration":"30","listeners":"119","mbid":"149a8fba-a683-4015-8f36-2dcd62121feb","url":"http:\/\/www.last.fm\/music\/The+National\/_\/This+Is+the+Last+Time","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"33"}},{"name":"Awful Sound (Oh Eurydice)","duration":"374","listeners":"117","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Awful+Sound+(Oh+Eurydice)","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"34"}},{"name":"Poema sobrecogido","duration":"344","listeners":"113","mbid":"","url":"http:\/\/www.last.fm\/music\/Extremoduro\/_\/Poema+sobrecogido","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Extremoduro","mbid":"f59163ba-1a7a-4349-b0fd-fb9582ebe333","url":"http:\/\/www.last.fm\/music\/Extremoduro"},"@attr":{"rank":"35"}},{"name":"Midnight City","duration":"244","listeners":"111","mbid":"43da2a39-725d-4ada-9a11-a4cf3bd923fb","url":"http:\/\/www.last.fm\/music\/M83\/_\/Midnight+City","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"M83","mbid":"6d7b7cd4-254b-4c25-83f6-dd20f98ceacd","url":"http:\/\/www.last.fm\/music\/M83"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/71737222.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/71737222.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/71737222.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/71737222.png","size":"extralarge"}],"@attr":{"rank":"36"}},{"name":"One for the Road","duration":"206","listeners":"108","mbid":"42f81b9d-4b96-4480-ab22-31ab3d602d42","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys\/_\/One+for+the+Road","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Arctic Monkeys","mbid":"ada7a83c-e3e1-40f1-93f9-3e73dbc9298a","url":"http:\/\/www.last.fm\/music\/Arctic+Monkeys"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92744747.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92744747.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92744747.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92744747.png","size":"extralarge"}],"@attr":{"rank":"37"}},{"name":"Burn","duration":"231","listeners":"106","mbid":"44b1f66c-54ea-4d68-9460-66482f8010fe","url":"http:\/\/www.last.fm\/music\/Ellie+Goulding\/_\/Burn","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Ellie Goulding","mbid":"33ca19f4-18c8-4411-98df-ac23890ce9f5","url":"http:\/\/www.last.fm\/music\/Ellie+Goulding"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91792047.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91792047.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91792047.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91792047.png","size":"extralarge"}],"@attr":{"rank":"38"}},{"name":"Venus","duration":"234","listeners":"105","mbid":"da40ede7-cacb-40ca-8873-fe8bb7eba844","url":"http:\/\/www.last.fm\/music\/Lady+Gaga\/_\/Venus","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Lady Gaga","mbid":"650e7db6-b795-4eb5-a702-5ea2fc46c848","url":"http:\/\/www.last.fm\/music\/Lady+Gaga"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93681345.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93681345.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93681345.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93681345.png","size":"extralarge"}],"@attr":{"rank":"39"}},{"name":"El camino de las utop\u00edas","duration":"499","listeners":"105","mbid":"","url":"http:\/\/www.last.fm\/music\/Extremoduro\/_\/El+camino+de+las+utop%C3%ADas","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Extremoduro","mbid":"f59163ba-1a7a-4349-b0fd-fb9582ebe333","url":"http:\/\/www.last.fm\/music\/Extremoduro"},"@attr":{"rank":"40"}},{"name":"Bloodbuzz Ohio","duration":"250","listeners":"105","mbid":"0546e4c5-6b5a-4d78-b448-e0acaffa31ce","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Bloodbuzz+Ohio","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92123881.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92123881.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92123881.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92123881.png","size":"extralarge"}],"@attr":{"rank":"41"}},{"name":"Lonely Boy","duration":"193","listeners":"104","mbid":"","url":"http:\/\/www.last.fm\/music\/The+Black+Keys\/_\/Lonely+Boy","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The Black Keys","mbid":"d15721d8-56b4-453d-b506-fc915b14cba2","url":"http:\/\/www.last.fm\/music\/The+Black+Keys"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/71475018.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/71475018.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/71475018.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/71475018.png","size":"extralarge"}],"@attr":{"rank":"42"}},{"name":"Fake Empire","duration":"203","listeners":"103","mbid":"51cfcb2b-4c3b-427f-8f5a-84418b2f9f90","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Fake+Empire","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/90164223.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/90164223.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/90164223.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/90164223.png","size":"extralarge"}],"@attr":{"rank":"43"}},{"name":"Pink Rabbits","duration":"30","listeners":"103","mbid":"fd7a7b6e-6774-495b-a1d6-99fb7d5cbdd2","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Pink+Rabbits","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"44"}},{"name":"Sorrow","duration":"205","listeners":"102","mbid":"3ef8c2cf-b32c-44da-8b66-a6c731f7ea64","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Sorrow","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92123881.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92123881.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92123881.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92123881.png","size":"extralarge"}],"@attr":{"rank":"45"}},{"name":"Humiliation","duration":"30","listeners":"102","mbid":"4a0e4394-fd8b-4f14-a284-599e500f7a61","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Humiliation","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"46"}},{"name":"Porno","duration":"363","listeners":"102","mbid":"","url":"http:\/\/www.last.fm\/music\/Arcade+Fire\/_\/Porno","streamable":{"#text":"1","fulltrack":"0"},"artist":{"name":"Arcade Fire","mbid":"52074ba6-e495-4ef3-9bb4-0703888a9f68","url":"http:\/\/www.last.fm\/music\/Arcade+Fire"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/93250337.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/93250337.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/93250337.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/93250337.png","size":"extralarge"}],"@attr":{"rank":"47"}},{"name":"Heavenfaced","duration":"30","listeners":"100","mbid":"85a40a2a-4f4e-4907-bccc-6988c0f151e1","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Heavenfaced","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/91490311.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/91490311.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/91490311.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/91490311.png","size":"extralarge"}],"@attr":{"rank":"48"}},{"name":"Mama","duration":"369","listeners":"99","mbid":"","url":"http:\/\/www.last.fm\/music\/Extremoduro\/_\/Mama","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"Extremoduro","mbid":"f59163ba-1a7a-4349-b0fd-fb9582ebe333","url":"http:\/\/www.last.fm\/music\/Extremoduro"},"@attr":{"rank":"49"}},{"name":"Terrible Love","duration":"279","listeners":"98","mbid":"4e5e682c-6d1a-46db-a525-c4c304d483a3","url":"http:\/\/www.last.fm\/music\/The+National\/_\/Terrible+Love","streamable":{"#text":"0","fulltrack":"0"},"artist":{"name":"The National","mbid":"664c3e0e-42d8-48c1-b209-1efca19c0325","url":"http:\/\/www.last.fm\/music\/The+National"},"image":[{"#text":"http:\/\/userserve-ak.last.fm\/serve\/34s\/92123881.png","size":"small"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/64s\/92123881.png","size":"medium"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/126\/92123881.png","size":"large"},{"#text":"http:\/\/userserve-ak.last.fm\/serve\/300x300\/92123881.png","size":"extralarge"}],"@attr":{"rank":"50"}}],"@attr":{"metro":"Madrid","page":"1","perPage":"50","totalPages":"10","total":"500"}}}]

// Get top 10 tracks
var data = data1[0]['toptracks']['track'].slice(0,10)

// Set color values. Currently using 10 colors and assign based on Artist Name
var color = d3.scale.category10();

// Create list of unique artists to determine color value
var artist = []
for (i=0;i<data.length;i++) {
	artist.push(data[i].artist.name) 
}
var uniqueArtist = artist.filter(function(elem, pos) {
    return artist.indexOf(elem) == pos;
})

// SVG variables
var width = 600,
    barHeight = 50,
    max_poularity = d3.max(data, function(d) { return d.listeners;});

var x = d3.scale.linear()
    .domain([0, max_poularity])
    .range([0, width-100]);

var chart = d3.select(".chart")
    .attr("width", width)
    .attr("height", barHeight * data.length);

// Bind data to the bars
var bar = chart.selectAll("g")
    .data(data)
  .enter().append("g")
    .attr("transform", function(d, i) { return "translate(100," + i * barHeight + ")"; });

// Draw bars. Fill color based on artist name. Bars transition starting from 0
bar.append("rect")
    .attr("fill", function(d) {return color(uniqueArtist.indexOf(d.artist.name))})
    .attr("width", 0)
    .transition()
    .duration(1000)
    .attr("width", function(d) { return x(Number(d.listeners))})
    .attr("height", barHeight - 1);

// Add listen count to the end of the bars
bar.append("text")
    .attr("x", function(d) { return x(Number(d.listeners)) - 5; })
    .attr("y", barHeight-3)
    //.attr("dy", ".2em")
    .text(function(d) { return d.listeners; })
    .attr("class", "popularity");

// Add album cover image
bar.append("image")
	.attr("xlink:href", function(d) {return d.image[1]['#text'];})
	.attr("width","50")
	.attr("height","49")
	.attr("x", "-50")
	.attr("class","album-art");

// Add track title and link to play song?
bar.append("svg:a")
    .attr("xlink:href", "http://www.playsong.com")
		.append("text")
    .text(function(d) { return d.name; })
    .attr("class", "track")
    .attr("x", "5")
    .attr("y", "30");

// Add artist name and link to last fm page?
bar.append("svg:a")
    .attr("xlink:href", "http://www.lastfmprofile.com")
    .append("text")
    .text(function(d) { return d.artist.name; })
    .attr("class", "artist")
    .attr("x", "5")
    .attr("y", "45");

// Add chart position number
bar.append("text")
    .text(function(d,i) { return i+1; })
    .attr("x", "-48")
    .attr("y", barHeight -2)
    .attr("class", "count");

</script>

